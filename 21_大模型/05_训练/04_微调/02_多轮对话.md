```markdown
User1：你好
Assistant1：你好，有什么能帮你吗？
User2：今天天气怎么样
Assistant2：北京今天天气晴，气温25度，紫外线较强，注意防护。
User3：谢谢你
Assistant3：不客气
```

在指令微调阶段，一般只有Assistant回答部分的loss会用于梯度回传，更新权重；而User部分的loss则不会用于更新权重

基本逻辑如下：

- prompt和answer之间一定要有一个开始符隔开，然后answer后需要一个结束符。
- 计算loss的时候，对prompt部分的loss进行mask，只计算answer部分的loss即可。


# 参考

[1] 一文看懂：如何充分高效训练多轮对话大模型, https://zhuanlan.zhihu.com/p/645517143