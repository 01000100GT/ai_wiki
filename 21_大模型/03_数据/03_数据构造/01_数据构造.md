# 1. 原理

## 1.1 RefGPT

    - 数据路径：https://github.com/sufengniu/RefGPT
    - 论文：RefGPT: Reference -> Truthful & Customized Dialogues Generation by GPTs and for GPTs，
           https://arxiv.org/abs/2305.14994#:~:text=RefGPT%20solves%20the%20model%20hallucination%20in%20dialogue%20generation,highly%20customization%20capability%2C%20which%20previous%20studies%20have%20ignored.
    - 5万条

1. 简介

    <br/>
   
    众所周知，事实正确性是ChatGPT的一大薄弱环节，也是所有试图复现ChatGPT的同行们所面临的重大挑战。
    想要提升事实正确性，可以标注大量的事实型对话数据（比如人物、科技、医疗、法律、艺术）
    用于微调GPT模型。为了避免人工标注的昂贵成本，我们提出一种自动生成事实型对话的方法，
    并公开我们的部分数据。我们是来自上海交大、香港理工大学等机构的NLP从业者，
    我们决定公开一批数据，这批数据包含5万条中文多轮对话。  
    <br/>   

2. 方法

    我们的目标是自动生成海量、高质量、事实型多轮对话，用于训练GPT，提升GPT的事实正确性。
    我们采用如下方法自动生成数据。

    - 采集优质的事实型文档，我们称之为reference，其来源可以是电子书、维基百科、优质垂类网站。
      文档需要涵盖尽量多的主题，包括但不限于人物、机构、科技、医疗、法律、人文、经济、家居、
      汽车、出行、美食、时尚、体育、教育、宠物。
    - 利用已有的LLM（例如付费API）生成多轮对话。输入是一篇reference，prompt
      类似“请根据这篇文章生成多轮问答”。API会输出一段多轮对话（dialogue）。
      这种方法将原本只适合预训练的文档转化成可供微调的多轮对话。
    - 第2步收集到大量的reference-dialogue二元组。将reference和prompt作为输入，
      dialogue作为目标，微调一个GPT模型（可以基于LLaMA或BLOOM的预训练基座）。
      我们将微调出的模型称作Reference-to-Dialogue GPT，缩写RefGPT。有了RefGPT，
      即可基于reference生成多轮对话，获得海量的数据。
   
    外界复现我们的方法时，需要关注2个要点。

    - Reference的质量、广度。Reference内容质量必须高，比如医疗等优质垂类网站的页面
      、维基百科上非生僻的词条，且需要对网页做清洗。Reference的广度应当大，不能限制在单个垂类或单个网站。
    - 调用已有LLM时需要写prompt，需要仔细尝试各种prompt，使得LLM生成的多轮对话符合预期。
    
3. 样例
 
   ```markdown
    Reference：1863年征兵暴动。美国南北战争期间，纽约市工人因对征兵制度不满而举行的四天暴动。法律允许交纳三百美元即可免役，这笔金额仅极少数人能负担。1863年7月11日纽约市点名入伍一开始，大批白人（多为工人）涌上街头，攻打征兵总部，烧毁房屋。在纽约市，白人对于解放后南方来的黑人进入劳工市场，特别是许多雇主雇用黑人破坏罢工，又有嫉恨，于是暴动者时常砸毁无辜的黑人家庭和商店。约一百人死亡（多为暴民）。

    Dialogue：
    
    Human: 你知道1863年的征兵暴动吗？
    Assistant: 是的，那是在美国南北战争期间，纽约市的工人因不满征兵制度而举行的四天暴动。
    Human: 那么，为什么工人会暴动呢？
    Assistant: 因为法律允许交纳三百美元即可免役，这笔金额仅极少数人能负担，大多数工人无法承受这样的费用。
    ```

# 参考

[1] 也看大模型幻觉的脑图总结：详解RefGPT事实性数据集、
     KoLA知识图谱大模型评测及HaluEval幻觉评估实现，https://mp.weixin.qq.com/s?__biz=MzAxMjc3MjkyMg==&mid=2648403146&idx=1&sn=8d409e766442fef1c86288b227fece86&chksm=83837f9fb4f4f6897a8bd290b7de976bb7ceca98a79f646ab3bb82f42826961318e962cf41dd&scene=178&cur_album_id=2120957806534033409#rd
